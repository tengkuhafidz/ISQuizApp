<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IS3103 Quizes [Admin]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script>
    <!-- vue development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase.js"></script>
    <!-- moment js -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
  </head>
  <body>
    <div id="admin">
      <section class="hero is-dark is-fullheight is-bold">
        <div class="hero-head">
          <nav class="navbar">
            <div class="container">
              <div class="navbar-brand">
                <a class="navbar-item title is-4">
                  IS3103 Quizes
                </a>
                <span class="navbar-burger burger" data-target="navbarMenuHeroB">
                  <span></span>
                  <span></span>
                  <span></span>
                </span>
              </div>
            </div>
          </nav>
        </div>

        <div class="hero-body">
          <div class="container has-text-centered">
            <p class="title is-1">
              Admin View
            </p>
            <p class="subtitle">
              Select the IS3103 Quiz results you want to look at
            </p>
            <div class="columns">
              <div class="field column is-6 is-offset-3">
                <div class="control is-expanded">
                  <div class="select is-medium is-fullwidth">
                    <select id="quizOptions" v-model="selectedQuiz">
                      <option>Select Quiz</option>
                      <option>Leadership Communication Style Preference</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="quiz1" v-if="selectedQuiz = 'quiz1'">
        <div class="container">
          <div class="columns">
            <div class="column ">
              <h1 class="title">Responses for: <a href="../quiz1" target="_blank">Leadership Communication Style Quiz</a> </h1>
              <h2 class="subtitle">
                The following are responses from the students, sorted according to the latest submission.
              </h2>
            </div>
            <div class="column is-narrow has-text-right">
              <button class="button is-large is-info" @click="retrieveResponsesFromDB">Refresh Data</button>
              <p class="subtitle is-7">Last queried: {{ dbRequest.queriedAt }}</p>
            </div>
          </div>
          <br />

          <div v-if="dbRequest.isLoading" id="loader"></div>
          <table class="table is-hoverable is-fullwidth is-striped animate-bottom">
            <thead>
              <tr>
                <th>Email</th>
                <th>Result</th>
                <th class="is-hidden-mobile">Authoritarian</th>
                <th class="is-hidden-mobile">Democratic</th>
                <th class="is-hidden-mobile">Laissez-Faire</th>
                <th class="is-hidden-mobile">Timestamp</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="response in responses">
                <td>{{ response.student.email }}</td>
                <td class="is-capitalized">{{ response.results.title }}</td>
                <td class="is-hidden-mobile">{{ response.results.scores.authoritarian }}</td>
                <td class="is-hidden-mobile">{{ response.results.scores.democratic }}</td>
                <td class="is-hidden-mobile">{{ response.results.scores.laissezFaire }}</td>
                <td class="is-hidden-mobile">{{ response.writtenAt }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section class="section" id="quiz2" v-if="selectedQuiz = 'quiz2'">
        <div class="container">
          <div class="columns">
            <div class="column ">
              <h1 class="title">Responses for: <a href="../quiz2" target="_blank">Leadership Style Quiz</a> </h1>
              <h2 class="subtitle">
                The following are responses from the students, sorted according to the latest submission.
              </h2>
            </div>
            <div class="column is-narrow has-text-right">
              <button class="button is-large is-info" @click="retrieveResponsesFromDB">Refresh Data</button>
              <p class="subtitle is-7">Last queried: {{ dbRequest.queriedAt }}</p>
            </div>
          </div>
          <br />

          <div v-if="dbRequest.isLoading" id="loader"></div>
          <table class="table is-hoverable is-fullwidth is-striped animate-bottom">
            <thead>
              <tr>
                <th>Email</th>
                <th>Result</th>
                <th class="is-hidden-mobile">Task</th>
                <th class="is-hidden-mobile">Relationship</th>
                <th class="is-hidden-mobile">Timestamp</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="response in responses">
                <td>{{ response.student.email }}</td>
                <td class="is-capitalized">{{ response.results.title }}</td>
                <td class="is-hidden-mobile">{{ response.results.scores.task }}</td>
                <td class="is-hidden-mobile">{{ response.results.scores.relationship }}</td>
                <td class="is-hidden-mobile">{{ response.writtenAt }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>

    <footer class="footer">
      <div class="content has-text-centered">
        <p>
          <strong>Leadership Quizes</strong> for IS3103 module | NUS School of Computing
        </p>
      </div>
    </footer>
    <script type="text/javascript" src="../js/utility.js"></script>
    <script type="text/javascript" src="admin.js"></script>
  </body>
</html>
